<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar</title>
    <link rel="stylesheet" href="./reset.css">
    <link rel="stylesheet" href="./app.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>

    <div class="container">
        <div id="waether"></div>
        <div class="wrap">
            <!-- 캘린더 -->
            <div id="myCalendar" class="myCalendar"></div>
            <!-- TodoList -->
            <div class="wrap_list">
                <div class="listArea">
                    <div id="todoList"></div>
                </div>
            </div>
        </div>
    </div>
    

 
</body>
<script src="./calendar.js"></script>
<script src="./todoList.js"></script>

<script>
const apiURI = 'http://api.openweathermap.org/data/2.5/weather?q=seoul&appid=4ff4e9b9bb000db3b5905140478fd229';
const test = document.getElementById('waether');
const createDiv3 = (what , Name)=>{
        const div = document.createElement('div');
        what === 1 
            ? div.classList.add(Name) 
            : div.setAttribute('id', Name);
        return div;
}
    
const loadingText = createDiv(1, 'loading');
loadingText.textContent = 'Loading...';
test.appendChild(loadingText);

fetch(apiURI)
.then(response =>{
    if(response.ok){
        return response.json();
    }else{
        throw new Error('ERROR!!!');
    }
})
.then(data => {
    const weather = {
        currentTemperature: data.main.temp - 273.15,
        currentHumidity: data.main.humidity,
        weatherMain: data.weather[0].main,
        weatherDescription: data.weather[0].description,
        weatherIcon: data.weather[0].icon,
        windSpeed: data.wind.speed,
        country: data.sys.country,
        cityName: data.name,
        cloudiness: data.clouds.all
    }
    test.removeChild(loadingText);

    const text = createDiv3(1 , 'test');
    text.textContent = weather.country;
    text.textContent += weather.cityName;
    console.log(weather.country);
    test.appendChild(text);

    
    weather.weatherIcon
});

// 여기서는 weatherPromise가 Promise 객체이므로, then()이나 catch()를 사용할 수 있습니다.

</script>
</html> 